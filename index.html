<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hindi / Urdu Super TTS</title>
<style>
/* Same CSS as before */
*{box-sizing:border-box}body{margin:0;font-family:'Segoe UI',sans-serif;background:#0f172a;color:#e2e8f0;min-height:100vh;display:flex;flex-direction:column}header{padding:15px;text-align:center;font-size:1.2rem;font-weight:700;background:#1e293b;border-bottom:2px solid #38bdf8}.container{padding:20px;max-width:500px;margin:0 auto;flex:1}label{display:block;margin:15px 0 5px;color:#38bdf8;font-size:.9rem}input,select,textarea{width:100%;padding:12px;border-radius:8px;border:1px solid #334155;background:#1e293b;color:#fff;outline:0}textarea{min-height:100px;resize:vertical}.buttons{display:flex;gap:10px;margin-top:20px}button{flex:1;padding:14px;border-radius:8px;border:none;font-size:1rem;font-weight:600;cursor:pointer}button.primary{background:#0ea5e9;color:#fff}button.secondary{background:#334155;color:#cbd5e1}#status-box{margin-top:15px;padding:10px;background:#334155;border-radius:6px;text-align:center;font-size:.9rem;display:none;color:#ffd700}audio{width:100%;margin-top:20px;display:none}.download-btn{background:#22c55e;color:#fff;width:100%;margin-top:15px;padding:12px;border:none;border-radius:8px;font-size:1rem;cursor:pointer;display:none}
</style>
</head>
<body>

<header>üéôÔ∏è Hindi AI Voice (HQ)</header>

<div class="container">
<label>API URL</label>
<input id="api-url" value="https://hindi-tts-3gjy.onrender.com" readonly style="opacity:0.6">

<label>‡§Ü‡§µ‡§æ‡•õ ‡§ö‡•Å‡§®‡•á‡§Ç (Select Voice)</label>
<select id="voice">
  <option value="hi-male">Hindi ‚Äì Male (Madhur)</option>
  <option value="hi-female">Hindi ‚Äì Female (Swara)</option>
  <option value="ur-male">Urdu ‚Äì Male (Salman)</option>
  <option value="ur-female">Urdu ‚Äì Female (Gulshan)</option>
</select>

<label>‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§≤‡§ø‡§ñ‡•á‡§Ç</label>
<textarea id="text" placeholder="‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç... (Example: ‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§Ø‡§π ‡§Ü‡§∞‡•ç‡§ü‡§ø‡§´‡§ø‡§∂‡§ø‡§Ø‡§≤ ‡§á‡§Ç‡§ü‡•á‡§≤‡§ø‡§ú‡•á‡§Ç‡§∏ ‡§ï‡•Ä ‡§Ü‡§µ‡§æ‡•õ ‡§π‡•à‡•§)">‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§Ø‡§π ‡§è‡§ï ‡§¨‡•á‡§π‡§§‡§∞‡•Ä‡§® ‡§®‡§à ‡§§‡§ï‡§®‡•Ä‡§ï ‡§π‡•à‡•§</textarea>

<div class="buttons">
  <button class="primary" id="genBtn" onclick="generate()">‚ñ∂ Generate</button>
  <button class="secondary" onclick="stopAudio()">Stop</button>
</div>

<div id="status-box">Processing...</div>
<audio id="player" controls></audio>
<button id="dlBtn" class="download-btn" onclick="download()">‚¨á Download MP3</button>

</div>

<script>
let audioBlob = null;
const audioPlayer = document.getElementById("player");
const genBtn = document.getElementById("genBtn");
const statusBox = document.getElementById("status-box");
const dlBtn = document.getElementById("dlBtn");

async function generate(){
  const text = document.getElementById("text").value.trim();
  const voice = document.getElementById("voice").value;
  const baseUrl = document.getElementById("api-url").value.replace(/\/$/, "");
  const API_URL = baseUrl + "/tts";

  if(!text){ alert("Text required!"); return; }

  genBtn.disabled = true;
  genBtn.innerText = "Generating...";
  statusBox.style.display = "block";
  statusBox.innerText = "Connecting to cloud...";
  statusBox.style.color = "#ffd700";
  audioPlayer.style.display = "none";
  dlBtn.style.display = "none";

  try {
    const res = await fetch(API_URL, {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({ text: text, voice: voice })
    });

    if(!res.ok) {
        const errData = await res.json();
        throw new Error(errData.detail || errData.error || "Server Error");
    }

    audioBlob = await res.blob();
    const url = URL.createObjectURL(audioBlob);
    
    audioPlayer.src = url;
    audioPlayer.style.display = "block";
    dlBtn.style.display = "block";
    statusBox.style.display = "none";
    
    try { await audioPlayer.play(); } catch(e){}

  } catch(e) {
    statusBox.innerText = "Error: " + e.message;
    statusBox.style.color = "#ff4d4d";
  } finally {
    genBtn.disabled = false;
    genBtn.innerText = "‚ñ∂ Generate";
  }
}

function stopAudio(){
  audioPlayer.pause();
  audioPlayer.currentTime = 0;
}

function download(){
  if(!audioBlob) return;
  const a = document.createElement("a");
  a.href = URL.createObjectURL(audioBlob);
  a.download = "ai-voice.mp3";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
</script>
</body>
</html>
